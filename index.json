{
  "index.html": {
    "href": "index.html",
    "title": "cotopaxi",
    "summary": "cotopaxi About A toolset for deploying data to Azure Cosmos DB as part of a cloud-native application, designed for straightforward integration with CI/CD pipelines. The package format is based on Microsoft Common Data Model (CDM) and ECMA-376 (Open Packaging Conventions). flowchart LR s1[/\"JSON<br />documents\"/] s2[[\"cotopaxi<br />pack\"]] s3[/\"CDM<br />&nbsp;&nbsp;package&nbsp;&nbsp;\"/] s4[[\"cotopaxi<br />deploy\"]] s5[(\"Azure<br />Cosmos DB\")] s1-->s2-->s3-->s4-->s5 classDef default stroke-width: 3px, font-family: system-ui Packing the database documents specified in a database package project (an example with Azure Pipelines): $ dotnet tool run cotopaxi pack $(Build.SourcesDirectory)/adventureworks.json $(Build.StagingDirectory)/adventureworks-v1.0.0.cdbpkg Packing /home/vsts/work/1/s/adventureworks/products/bikes.json:$[0] for upsert in adventureworks\\products Packing /home/vsts/work/1/s/adventureworks/products/bikes.json:$[1] for upsert in adventureworks\\products Deploying the created database package to a configured Azure Cosmos DB account (an example with Azure Pipelines): $ dotnet tool run cotopaxi deploy $(System.ArtifactsDirectory)/**/*.cdbpkg Deploying package /home/vsts/work/r1/a/adventureworks-v1.0.0.cdbpkg to endpoint https://adventureworks.documents.azure.com:443 Executing upsert cdbpkg:dfcf04cb-886e-ae82-9172-fa4a1acb5d8b:$[0] in adventureworks\\products - HTTP 200 Executing upsert cdbpkg:dfcf04cb-886e-ae82-9172-fa4a1acb5d8b:$[1] in adventureworks\\products - HTTP 200 References Microsoft - Common Data Model ECMA International - ECMA-376"
  },
  "topics/cli-checkpoint.html": {
    "href": "topics/cli-checkpoint.html",
    "title": "cotopaxi checkpoint",
    "summary": "cotopaxi checkpoint Name cotopaxi checkpoint - Creates a database package with rollback operations. Synopsis cotopaxi checkpoint <package> <rollback-package> [--endpoint <endpoint> --key <key>|--connection-string <connection-string>] cotopaxi checkpoint -h|--help Description Deploy Operation Rollback Operation Condition delete N/A The document does not exist in the container delete upsert The document does exist in the container create delete The document does not exist in the container create N/A The document does exist in the container upsert delete The document does not exist in the container upsert upsert The document does exist in the container patch N/A The document does not exist in the container patch upsert The document does exist in the container Arguments package The path to the database package or packages for deployment to the Azure Cosmos DB account (globbing patterns are supported). rollback-package The path to a resulting database package with rollback operations. Options --endpoint <endpoint> The address of the Azure Cosmos DB account. Can be specified with AZURE_COSMOS_ENDPOINT environment variable. Must be used with --key option or AZURE_COSMOS_KEY environment variable. --key <key> The account key or resource token for the Azure Cosmos DB account. Can be specified with AZURE_COSMOS_KEY environment variable. Must be used with --endpoint option or AZURE_COSMOS_ENDPOINT environment variable. --connection-string <connection-string> The connection string for the Azure Cosmos DB account. Can be specified with AZURE_COSMOS_CONNECTION_STRING environment variable. -h|--help Show help and usage information. Examples Creating a rollback package with Azure Pipelines using AZURE_COSMOS_ENDPOINT and AZURE_COSMOS_KEY environment variables: - script: > dotnet tool run cotopaxi checkpoint $(System.ArtifactsDirectory)/**/*.cdbpkg $(System.ArtifactsDirectory)/adventureworks-rollback.cdbpkg References Microsoft - Azure Cosmos DB service quotas"
  },
  "topics/cli-deploy.html": {
    "href": "topics/cli-deploy.html",
    "title": "cotopaxi deploy",
    "summary": "cotopaxi deploy Name cotopaxi deploy - Deploys the database packages to the Azure Cosmos DB account. Synopsis cotopaxi deploy <package> [--endpoint <endpoint> --key <key>|--connection-string <connection-string>] [--profile <profile>] [--dry-run] cotopaxi deploy -h|--help Description The command uses a connection to the Azure Cosmos DB account to get partition keys configuration for regular and \"dry run\" modes. The operations on the same document defined by a unique identifier and partition key values are executed in the following order: Delete a document if it exists Create a document if it does not exist Upsert a document Patch a document if it exists Arguments package The path to the database package or packages to deploy to the Azure Cosmos DB account (globbing patterns are supported). Options --endpoint <endpoint> The address of the Azure Cosmos DB account. Can be specified with AZURE_COSMOS_ENDPOINT environment variable. Must be used with --key option or AZURE_COSMOS_KEY environment variable. --key <key> The account key or resource token for the Azure Cosmos DB account. Can be specified with AZURE_COSMOS_KEY environment variable. Must be used with --endpoint option or AZURE_COSMOS_ENDPOINT environment variable. --connection-string <connection-string> The connection string for the Azure Cosmos DB account. Can be specified with AZURE_COSMOS_CONNECTION_STRING environment variable. --profile The path to the deployment profile or profiles that specify documents eligible for updates, based on schema profile.schema.json (globbing patterns are supported). --dry-run Show which operations would be executed instead of actually executing them. -h|--help Show help and usage information. Examples Deploying packages with Azure Pipelines: - script: > dotnet tool run cotopaxi deploy $(System.ArtifactsDirectory)/**/*.cdbpkg --endpoint $(AZURE_COSMOS_ENDPOINT) --key $(AZURE_COSMOS_KEY) Deploying packages with Azure Pipelines using AZURE_COSMOS_ENDPOINT and AZURE_COSMOS_KEY environment variables and deployment profiles: - script: > dotnet tool run cotopaxi deploy $(System.ArtifactsDirectory)/**/*.cdbpkg --profile $(System.ArtifactsDirectory)/**/*.profile.json The corresponding deployment profile adventureworks-v1.0.0.profile.json: [ { \"databaseName\": \"adventureworks\", \"containerName\": \"products\", \"documentId\": \"3202cb6f-42af-4fe6-a3c5-d61927721e75\", \"documentPartitionKey\": [ \"bikes\" ] } ] References Microsoft - Azure Cosmos DB service quotas"
  },
  "topics/cli-diff.html": {
    "href": "topics/cli-diff.html",
    "title": "cotopaxi diff",
    "summary": "cotopaxi diff Name cotopaxi diff - Shows changes between database packages. Synopsis cotopaxi diff <package1> <package2> [--endpoint <endpoint> --key <key>|--connection-string <connection-string>] [--profile <profile>] [--exit-code] cotopaxi diff -h|--help Description The command uses a connection to the Azure Cosmos DB account to get partition keys configuration. Arguments package1 The path to the database package to compare. package2 The path to the database package to compare with. Options --endpoint <endpoint> The address of the Azure Cosmos DB account. Can be specified with AZURE_COSMOS_ENDPOINT environment variable. Must be used with --key option or AZURE_COSMOS_KEY environment variable. --key <key> The account key or resource token for the Azure Cosmos DB account. Can be specified with AZURE_COSMOS_KEY environment variable. Must be used with --endpoint option or AZURE_COSMOS_ENDPOINT environment variable. --connection-string <connection-string> The connection string for the Azure Cosmos DB account. Can be specified with AZURE_COSMOS_CONNECTION_STRING environment variable. --profile The path to the deployment profile to generate based on new and modified documents, which can be used with deploy command. The option automatically discards --exit-code instruction. --exit-code Instruct the program to exit with 1 if there were differences and 0 otherwise. -h|--help Show help and usage information. Examples Showing changes in a new version of database package: cotopaxi diff adventureworks-v1.0.1.cdbpkg adventureworks-v1.0.0.cdbpkg Showing changes in a new version of database package and generating a deployment profile based on changes: cotopaxi diff adventureworks-v1.0.1.cdbpkg adventureworks-v1.0.0.cdbpkg --profile adventureworks-v1.0.1.profile.json"
  },
  "topics/cli-format.html": {
    "href": "topics/cli-format.html",
    "title": "cotopaxi format",
    "summary": "cotopaxi format Name cotopaxi format - Formats and prunes the sources with deployment entries. Synopsis cotopaxi format <source> cotopaxi format -h|--help Description The command formats sources, removes comments and the system properties: _etag, _rid, _self, _ts. Arguments source The path to a source or sources with deployment entries to format and prune (globbing patterns are supported). Options -h|--help Show help and usage information. Examples Formatting a project file: cotopaxi format adventureworks/products/bikes.json Formatting all project files: cotopaxi format adventureworks/**/*.json References Microsoft - Azure Cosmos DB documents"
  },
  "topics/cli-pack.html": {
    "href": "topics/cli-pack.html",
    "title": "cotopaxi pack",
    "summary": "cotopaxi pack Name cotopaxi pack - Packs the deployment entries into a database package. Synopsis cotopaxi pack <project> <package> [--version <version>] cotopaxi pack -h|--help Description The package format supports the following deployment operations: create Given a unique identifier and partition key values, creates a document if it does not exist. upsert Given a unique identifier and partition key values, creates a document if it does not exist, or update if it exists. patch Given a unique identifier and partition key values, performs partial document update if it exists. delete Given a unique identifier and partition key values, deletes a document if it exists. Partial document update performs Azure Cosmos DB set operation on specified root-level document properties. The project format supports relative globbing patterns and the following variables in document paths: Name Value Version The value specified with the --version <version> option A documents file must be a JSON array of objects, where each object has the id property and partition key properties specified. Arguments project The path to the project that specifies deployment entries to include, based on schema project.schema.json. package The path to a resulting database package. Options --version <version> Sets the package version information. -h|--help Show help and usage information. Examples Packing documents with Azure Pipelines: - script: > dotnet tool run cotopaxi pack $(Build.SourcesDirectory)/adventureworks.json $(Build.StagingDirectory)/adventureworks-v1.0.0.cdbpkg The corresponding package source adventureworks/products/bikes.json: [ { \"id\": \"3202cb6f-42af-4fe6-a3c5-d61927721e75\", \"category\": \"bikes\", \"name\": \"Mountain-100 Silver, 38\" }, { \"id\": \"e1894e24-550d-4fe3-9784-47d614600baa\", \"category\": \"bikes\", \"name\": \"Mountain-500 Black, 40\" } ] The corresponding package project adventureworks.json: { \"databases\": [ { \"name\": \"adventureworks\", \"containers\": [ { \"name\": \"products\", \"operations\": [ { \"name\": \"upsert\", \"documents\": [ \"adventureworks/products/**/*.json\", \"adventureworks/products/**/*-v$(Version).json\" ] } ] } ] } ] } References Microsoft - Azure Cosmos DB service quotas"
  },
  "topics/cli-show.html": {
    "href": "topics/cli-show.html",
    "title": "cotopaxi show",
    "summary": "cotopaxi show Name cotopaxi show - Shows information about database packages. Synopsis cotopaxi show <package> cotopaxi show -h|--help Arguments package The path to the database package or packages to show information about (globbing patterns are supported). Options -h|--help Show help and usage information. Examples Showing information about a database package: cotopaxi show adventureworks-v1.0.0.cdbpkg Showing information about available database packages: cotopaxi show **/*.cdbpkg"
  }
}